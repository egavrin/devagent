{
  "id": "ETS001_DOC_PUBLIC_API",
  "name": "Public API must have JSDoc comment",
  "severity": "error",
  "file_include": ["^stdlib/.*\\.ets$"],
  "file_exclude": [],
  "only_changed_lines": true,
  "requires_full_file_context": false,
  "detection": {
    "language_hint": "ts",
    "targets": [
      {
        "what": "new_or_modified_public_api",
        "definition": "Top-level 'export' declarations (function, class, interface, enum, const with function value), and 'public' members of exported classes/interfaces declared or modified in the patch."
      }
    ],
    "signal": {
      "must_have_preceding_jsdoc": true,
      "jsdoc_forms": [
        "/** ... */",
        "/** @inheritDoc */"
      ],
      "distance_max_lines_above": 1
    },
    "exceptions": [
      "overrides_marked_with_override_keyword_or_@override_tag",
      "re-export_lines_like 'export { X } from ...' or 'export * from ...'"
    ]
  },
  "examples": {
    "positive_snippets": [
      "export function doThing(): void { ... }  // no JSDoc above → violation",
      "export class Proxy { public getTarget() { ... } }  // no JSDoc above method → violation"
    ],
    "negative_snippets": [
      "/** Returns target. */\nexport function getTarget(): Target { ... }  // ok"
    ]
  },
  "message_template": "Missing JSDoc for public API: {symbol}",
  "notes": "Report at the line where the public declaration begins."
}
